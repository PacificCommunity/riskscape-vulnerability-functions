import numpy as np

# Calculate infrastructure line geometry loss	
def function(infrastructure_lines, hazard):
	
	# Flood depths for depth-damage curve interpolation.
    depth_x = [0.0, 0.25, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.1, 10.0]

    # Damage ratios for point infrastructure classes. Add new array for each new infrastructure class. 
    IL1_ydr = [0.0, 0.01, 0.03, 0.08, 0.11, 0.13, 0.16, 0.21, 0.25, 1.0]# Class 1 i.e., Sealed Road
    IL2_ydr = [0.0, 0.08, 0.16, 0.23, 0.3, 0.33, 0.39, 0.42, 0.45, 1.0]# Class 2 i.e., Unsealed Road
	
	# Set default flood depths
    if hazard is None:
        depth = 0
    else:
        depth = hazard

	# Define infrastructure point use from exposure layer.
    useIL = infrastructure_lines["UseType"]
    subuseIL = infrastructure_lines["SubUseType"]
    valueIL = infrastructure_lines["Value"]

    if depth is None:
        return {'Direct_Loss': 0}
    else:
        if useIL  == 'Road' and subuseIL  == 'road - primary':
            damage_ratio = np.interp(depth, depth_x, IL1_ydr)
        else:
            damage_ratio = np.interp(depth, depth_x, IL2_ydr)

        loss = int(damage_ratio * valueIL)
        return {'Direct_Loss': loss}

